 ## 실수를 표현하는 방법

 밑이 10인 실수에는 10진 소수점이 포함된다. <br>
 밑이 2인 경우, 실수를 표기하기 위해 2진 소수점을 표현할 방법이 필요하다.
 
### 고정소수점 표현

`고정소수점` : 4비트가 있을 때, 그 중 2비트는 2진 소수점의 오른쪽에 있는 `분수`들을 표현하는 데 쓰고 나머지 2비트는 왼쪽에 있는 `숫자`들을 표현하는 데에 사용해 소수점의 위치를 항상 일정하게 표기하는 표현법 <br>

* `정수부` : 소수점 좌측의 정수를 표현하는 비트 자리 <br>
정수부의 표현은 2진 표현법과 비슷하게 소수점 좌측 2비트는 네가지 정수를 표현할 수 있다.
<br><br>
* `소수부` : 소수점 우측으로 소수를 표현하는 비트 자리 <br>
소수점 우측의 소수부에서도 네가지 값을 표현할 수 있다. <br>
2진수에서 소수는 1/2, 1/4 등 2의 거듭제곱을 분모로 사용한다.

<br>

범용 컴퓨터는 일반적 문제 해결을 위해 만들어진 컴퓨터이기 때문에 넓은 범위의 수를 다룰 수 있어야 한다. <br>
예로, 양자 역학의 기본 상수 중 하나인 플랑크 상수와 화학식에서 사용되는 상수인 아보가드로 수의 범위는 10⁵⁷이라는 수에 달하며, 2¹⁹¹ 정도로 약 200비트가 필요하다. <br>
고정소수점 표현은 쓸모 있는 범위의 실숫값의 표현을 위해 필요한 비트 개수가 너무 많은 표현법이기 때문에 범용 컴퓨터에서는 잘 사용하지 않는다. <br>

디지털 신호 처리 장치 등 특별한 목적에 사용하는 일부 컴퓨터는 여전히 고정소수점 수를 사용한다. <br>
고정소수점 수가 응용에 더 유용한 경우도 있다.

<br>

### 부동소수점 표현

플랑크 상수부터 아보가드로 수에 이르는 범위의 값을 2진수로 표현할 때 발생하는 문제를 해결하기 위해 과학적 표기법을 2진수에 적용하기 시작했다. <br>

과학적 표기법은 10진 소수점 왼쪽이 한자리 뿐인 소수(가수)에 10을 몇번 거듭제곱한 값을 곱하는 방식으로 소수를 표현한다. <br>

<b>0.0012 = `1.2 ×10⁻³`</b>

`부동소수점` : 지수와 가수를 분리함으로 써 수 표현에 필요한 0을 모두 저장하지 않고도 큰 수나 작은 수를 표현할 수 있는 표현법

* `가수부` : 2진 소수를 표현
* `지수부` : 2의 거듭 제곱 횟수를 표현

단순히 가수부만 보면 항상 2진 소수점의 위치가 같아 보이지만, 가수가 같다고 해도 지수가 무엇인가에 따라 소수점 왼쪽 숫자의 자리가 달라지는 점을 고려하면 소수점 위치는 고정되어 있지 않다.

* 부동소수점 표현법의 비트 조합에는 낭비되는 조합이 많다. <br>
0을 표현하는 법은 4가지나 되며, 1.0과 2.0, 4.0을 표현하는 방법은 두 가지씩 있다.

* 비트 패턴이 가능한 모든 수를 표현하지 못한다. <br>
지수가 커질수록 가수의 한 패턴과 다른 패턴 사이의 값 차이가 커지는데,
이때 0.5와 0.5를 더해 1.0을 얻을 수 있지만 6.5를 표현하는 비트 패턴이 없어 0.5와 6.0울 더할 수 없게 된다.

<br>

### IEEE 부동소수점 수 표준

부동소수점 수 시스템은 컴퓨터에서 계산을 수행할 때 실수를 표현하는 표준 방법이다. <br>

가수와 지수에 대해 각각 부호 비트를 사용한다. <br>
지수에 대한 부호 비트는 지수의 비트 패턴에 감춰져있다. <br>
낭비되는 비트 조합을 최소화하고 반올림을 쉽게 하기 위한 여러가지 트릭이 사용된다.

IEEE 754 표준은 이 모든 기능을 정의하고 있다.
* `정규화` (nomalization) : 같은 비트를 사용하더라도 정밀도를 가능한 한 높이기 위해 가수를 조정해 맨 앞에 0이 없게 만든다. <br>
가수를 조정하려면 지수도 조정해야 한다.

* `가수 조정` : 가수의 맨 왼쪽 비트가 1이라는 사실을 알기 때문에 이를 생략하여, 가수에 1비트를 더 사용할 수 있게 한다.

#### 자주 사용되는 부동소수점 수
1. `기본 정밀도 부동소수점 수` : 32비트를 사용하며 7비트 정밀도로 대략 ±10⁺⁻³⁸ 범위를 표현할 수 있다.
2. `2배 정밀도 부동소수점 수` : 64비트를 사용하기 때문에 더 넓은 범위를 표현할 수 있으며, 대략 ±10⁺⁻³⁰⁸ 범위의 수를 15비트 정밀도로 표현할 수 있다.

* 두 형태 모두 가수에 대한 부호를 사용한다.
* 2배 정밀도 수가 기본 정밀도 수보다 지수가 3비트 더 크고, 지수 범위는 8배 더 크다.
* 2배 정밀도 수는 기본 정밀도 수보다 가수가 29비트 더 크다.
* 2배 정밀도 수는 비트를 2배나 더 많이 사용하는 대신 정밀도를 훨씬 크게 얻을 수 있다.

지수에 대한 부호 비트는 따로 존재하지 않아, IEEE 754 설계자들은 지수 비트가 모두 0이거나 1인 경우 특별한 의미를 갖게 하고, 실제 지숫값은 나머지 비트 패턴에 집어넣고자 편향된 지숫값을 사용했다.

* 기본 정밀도의 편향값 127(01111111)은 지수 `0`을 표현한다.
* 2진수 1을 표현하는 비트 패턴(00000001)은 지수에서 `-126`을 표현한다.
* 2진수 254(11111110)는 `+127`을 표현한다.
* 2배 정밀도 수는 편향값으로 127 대신 `1023`을 사용한다.

IEEE 754는 0으로 나눴을 때 생길 수 있는 양의 무한대나 음의 무한대를 표현하는 비트 패턴 등 여러 가지 특별한 비트 패턴을 제공한다는 점이 편리하다. <br>
이런 비트 패턴 중에는 수가 아님(Not a Number) 이라는 뜻의 `NaN`을 표현하는 특별한 값도 있다. <br>
부동소수점 수로 계산하던 도중 NaN 값이 생기면 `뭔가 잘못된 산술 연산을 수행했다`는 뜻이다. <br>

이런 특별한 비트 패턴들은 특별한 지숫값(모든 비트가 0이거나 모든 비트가 1인 지수)을 사용한다.